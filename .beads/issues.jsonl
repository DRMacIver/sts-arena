{"id":"sts-arena-0cg","title":"Mod compatibility: Dynamic content loading and graceful handling of missing content","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-03T13:24:55.401572Z","created_by":"drmaciver","updated_at":"2026-01-03T15:06:45.98768517Z","closed_at":"2026-01-03T15:06:45.98768517Z","close_reason":"Implemented encounter category consolidation: Created EncounterCategory class in LoadoutConfig as single source of truth for all encounters (normal/elite/boss). ArenaEncounterSelectScreen now uses ENCOUNTER_CATEGORIES instead of duplicated hardcoded lists. Elite detection now derived from categories. Boss detection added. Remaining work: Dynamic card/relic/potion loading from game libraries, graceful handling of missing content in history display (disable replay for unavailable encounters).","comments":[{"id":1,"issue_id":"sts-arena-0cg","author":"drmaciver","text":"Additional consideration: Non-existent encounters in history. When displaying fight history, encounters from unloaded mods should be displayed (with name shown) but NOT made clickable/replayable if encounter can't be spawned. Keep in database - never delete. Also handle encounter ID mismatches gracefully (monster name vs encounter list ID) - if no match, just don't show in Current Fight section.","created_at":"2026-01-03T13:33:34Z"},{"id":2,"issue_id":"sts-arena-0cg","author":"vscode","text":"Elite detection for burning effect uses hardcoded elite names. For mod compatibility, should detect elites dynamically (e.g., check MonsterGroup.areMonsters or room type).","created_at":"2026-01-03T14:58:58Z"}]}
{"id":"sts-arena-0ui","title":"Comprehensive UI/UX and code review","description":"Review the entire codebase for:\n- UI improvements (layout, spacing, visual polish)\n- UX improvements (flow, interactions, feedback)\n- Code design improvements (structure, patterns, maintainability)\n- Fix scroll visibility issues in loadout editor\n- General jankiness reduction","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-03T03:55:40.058373Z","created_by":"drmaciver","updated_at":"2026-01-03T16:45:40.39803025Z","closed_at":"2026-01-03T16:45:40.39803025Z","close_reason":"Completed comprehensive review. Key findings: (1) Code structure is well-organized but ArenaRunner (703 lines) could benefit from splitting; (2) All screens lack a common base class (code duplication); (3) 65+ hardcoded UI constants could be centralized. All user stories verified - implementation matches documented workflows. Created docs/USER_STORIES.md with comprehensive workflow documentation."}
{"id":"sts-arena-167","title":"Make history tables sortable by column","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-03T12:53:05.306802Z","created_by":"drmaciver","updated_at":"2026-01-03T15:10:09.828809334Z","closed_at":"2026-01-03T15:10:09.828809334Z","close_reason":"Implemented sortable history table columns: Added SortColumn enum and sort state, column header hitboxes for click detection, sorting logic for all 4 columns (Loadout, Encounter, Outcome, Date), visual indicators (^ and v) showing current sort column and direction, hover highlighting on column headers."}
{"id":"sts-arena-1ti","title":"Practice encounter sequences","description":"Allow players to queue multiple encounters to fight in sequence (e.g., Act 3 path: Elite → Elite → Boss). Track cumulative HP/potion usage across the sequence.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-03T16:49:19.205307671Z","created_by":"vscode","updated_at":"2026-01-03T17:36:18.812904962Z","closed_at":"2026-01-03T17:36:18.812904962Z","close_reason":"Dropped as non-goal - existing manual HP adjustment covers use cases"}
{"id":"sts-arena-23b","title":"Loadout name should be choosable in the Create Custom Loadout screen","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T16:27:49.70158Z","created_by":"drmaciver","updated_at":"2026-01-03T03:40:55.476015Z","closed_at":"2026-01-03T03:40:55.476015Z","close_reason":"Added name input field to Create Custom Loadout screen. Users can now enter a custom name for their loadout. If left empty, defaults to 'Custom [Class]'. When copying a loadout, the name is prefilled with 'Copy of [original name]'."}
{"id":"sts-arena-26x","title":"Fix: Arena win sometimes transitions to normal game map screen","description":"After winning an arena fight, the game sometimes transitions to the map screen instead of showing the victory screen. Exit button still says 'Leave Arena' and no save is created when leaving. This was observed on the second fight (Jaw Worm after Cultist). Need to review code, add extensive Hypothesis and hand-written tests, and fix.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-09T12:48:03.264010754Z","created_by":"vscode","updated_at":"2026-01-09T13:35:04.820795171Z","closed_at":"2026-01-09T13:35:04.820795171Z","close_reason":"Fixed by properly clearing arenaRunInProgress before CardCrawlGame.startOver() in all win/defeat patches"}
{"id":"sts-arena-2ak","title":"Quick rematch from history screen","description":"Add a 'Rematch' button to each row in the fight history screen. Clicking it immediately starts an arena fight with that exact loadout+encounter combination.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-03T16:48:57.320799841Z","created_by":"vscode","updated_at":"2026-01-03T16:50:34.267861595Z","closed_at":"2026-01-03T16:50:34.267861595Z","close_reason":"Already implemented. ArenaHistoryScreen already has a 'Replay' button on each row that starts the same loadout+encounter combination."}
{"id":"sts-arena-2bk","title":"Add Back action to Hypothesis state machine tests","description":"Add the ability for Hypothesis tests to:\n1. Press Back from encounter select screen (returns to loadout select or main menu)\n2. Press Back from loadout select screen (returns to main menu)\n\nThis enables generating test cases that exercise the save file cleanup paths.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T02:09:42.281384465Z","created_by":"vscode","updated_at":"2026-01-06T02:19:48.031414009Z","closed_at":"2026-01-06T02:19:48.031414009Z","close_reason":"Added arena_back command and exit_arena_screens rule to Hypothesis state machines"}
{"id":"sts-arena-2oe","title":"Max label on loadout editor overlaps with the - label","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T16:24:23.8949Z","created_by":"drmaciver","updated_at":"2026-01-03T03:38:31.97048Z","closed_at":"2026-01-03T03:38:31.97048Z","close_reason":"Closed"}
{"id":"sts-arena-31v","title":"Favorite/pin loadouts","description":"Add star/pin button to loadouts. Pinned loadouts appear at the top of the list. Helps keep frequently-used builds easily accessible.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-03T16:49:21.595569422Z","created_by":"vscode","updated_at":"2026-01-03T17:19:42.151649792Z","closed_at":"2026-01-03T17:19:42.151649792Z","close_reason":"Implemented favorite/pin loadouts with star indicator, favorite button, and sorting favorites first"}
{"id":"sts-arena-3bj","title":"Turn-by-turn replay/log viewer","description":"After a fight, view a log of what happened each turn: cards played, damage dealt, enemy actions. Helps analyze what went wrong in losses.","status":"closed","priority":4,"issue_type":"feature","created_at":"2026-01-03T16:49:37.959379513Z","created_by":"vscode","updated_at":"2026-01-03T16:51:02.820202927Z","closed_at":"2026-01-03T16:51:02.820202927Z","close_reason":"Removed from scope - doesn't fit with the rest of the feature set."}
{"id":"sts-arena-41x","title":"ARM64 Linux acceptance tests unsupported - need x86_64","description":"## Summary\nARM64 Linux (e.g., devcontainer on Apple Silicon Mac) cannot run acceptance tests because the game's native libraries crash.\n\n## Technical Details\n- libGDX ARM64 natives from Maven Central partially work (loads but crashes in gdx2d_set_blend)\n- LWJGL 2.x ARM64 natives have display mode issues (ArrayIndexOutOfBoundsException in getAvailableDisplayModes)\n- OpenAL requires null ALSA config (no sound card in container) but still has issues\n- Even with all workarounds, native crashes occur in libgdx.so\n\n## Error Evidence\n```\nSIGSEGV at pc=..., pid=..., tid=...\nC  [libgdx.so+0x14568]  gdx2d_set_blend+0x0\n```\n\n## Workarounds Attempted\n1. Downloaded ARM64 libGDX natives from Maven\n2. Installed system LWJGL ARM64 packages\n3. Configured null ALSA backend for OpenAL\n4. Set LD_LIBRARY_PATH and java.library.path\n\n## Resolution Options\n1. Run acceptance tests on x86_64 Linux (GitHub Actions)\n2. Run on macOS with native Steam installation\n3. Wait for better ARM64 support from game dependencies\n\n## Current Script Behavior\nrun-acceptance-tests.sh now exits early on ARM64 Linux with clear error message.","status":"closed","priority":3,"issue_type":"bug","created_at":"2026-01-03T21:22:17.981834376Z","created_by":"vscode","updated_at":"2026-01-09T20:45:59.800984596Z","closed_at":"2026-01-09T20:45:59.800984596Z","close_reason":"Known limitation documented. ARM64 Linux native library support is a dependency issue (libGDX, LWJGL 2.x). Script already handles this with early exit and clear error message. Use x86_64 Linux or native macOS instead."}
{"id":"sts-arena-4ca","title":"Loadout creator: keep state per character in memory","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-03T18:47:17.898380585Z","created_by":"vscode","updated_at":"2026-01-09T14:13:14.826209468Z","closed_at":"2026-01-09T14:13:14.826209468Z","close_reason":"Implemented per-character state storage in LoadoutCreatorScreen. Now when switching between character tabs, the deck, relics, potions, HP, and ascension are preserved and restored."}
{"id":"sts-arena-4hx","title":"Mod compatibility (Downfall, custom characters)","description":"Support encounters and characters from popular mods like Downfall. Detect installed mods and include their content in encounter/card selection.","status":"closed","priority":4,"issue_type":"feature","created_at":"2026-01-03T16:49:38.098987222Z","created_by":"vscode","updated_at":"2026-01-09T21:20:24.307599177Z","closed_at":"2026-01-09T21:20:24.307599177Z","close_reason":"Will not implement - enhancement feature beyond core scope"}
{"id":"sts-arena-5kd","title":"Move error handling to server side (CommunicationMod)","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-05T13:47:43.484790263Z","created_by":"vscode","updated_at":"2026-01-09T20:45:24.04370151Z","closed_at":"2026-01-09T20:45:24.04370151Z","close_reason":"Issue is too vague - 'Move error handling to server side' without specifying which error handling or what problems it should solve. Please create specific issues for particular error handling improvements needed."}
{"id":"sts-arena-5o9","title":"Investigate headless mod testing launcher","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T17:43:31.47479401Z","created_by":"vscode","updated_at":"2026-01-03T18:47:17.770560252Z","closed_at":"2026-01-03T18:47:17.770560252Z","close_reason":"Implemented HeadlessPatchTest using Javassist to validate patches. Added X11 libraries to devcontainer for full Xvfb testing."}
{"id":"sts-arena-6ae","title":"Loadout versioning and edit-in-place","description":"Allow editing loadouts in place while maintaining accurate historical statistics.\n\nRequirements:\n1. Snapshot deck/relics in arena_runs table at fight time (not just loadout_id reference)\n2. Compute content hash of loadout config (deck + relics + potions)\n3. Store content_hash in arena_runs when fight starts\n4. Store content_hash in loadouts table (updated on any change)\n5. In stats/history views, indicate when a fight was done with an older version:\n   - Show indicator like \"(old version)\" or different color\n   - Allow filtering to show only fights with current version\n6. Add \"Edit\" button to loadout selection that opens creator with existing config\n7. Editing updates the loadout and its content_hash\n8. Consider showing: \"3 encounters only tested on older versions\"\n\nAlternative simpler approach:\n- Just snapshot deck_json/relics_json in arena_runs\n- Compare current loadout to snapshot to detect differences\n- Skip complex versioning, just show \"loadout changed since this fight\"","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-03T16:56:39.221021722Z","created_by":"vscode","updated_at":"2026-01-03T17:07:04.06477472Z","closed_at":"2026-01-03T17:07:04.06477472Z","close_reason":"Implemented loadout versioning: content hash computation, snapshot storage in arena_runs, edit button in loadout screen, and edit mode in creator screen"}
{"id":"sts-arena-6b5","title":"Remove timing dependence from test protocol","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-05T13:47:30.180395048Z","created_by":"vscode","updated_at":"2026-01-06T00:35:32.081086877Z","closed_at":"2026-01-06T00:35:32.081086877Z","close_reason":"Implemented wait_for visual_stable in CommunicationMod and integrated with screenshot capture"}
{"id":"sts-arena-6kv","title":"Current and max HP should be editable as numbers","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T16:23:43.963714Z","created_by":"drmaciver","updated_at":"2026-01-03T03:42:58.04363Z","closed_at":"2026-01-03T03:42:58.04363Z","close_reason":"HP and Max HP values are now clickable for direct numeric entry. Click the value to edit, type numbers, and press Enter to confirm or Escape to cancel. +/- buttons still work alongside."}
{"id":"sts-arena-6o5","title":"Arena victory/defeat screenshots show wrong screens","notes":"## Problem\nThe documentation screenshots for arena victory and defeat screens are incorrect:\n- `arena_victory.png` shows the combat room with dead monsters instead of a victory results screen\n- `arena_defeat.png` shows a small/blank screen instead of the death screen with arena buttons\n\n## Root Cause\nThe ArenaVictoryScreenPatch patches `com.megacrit.cardcrawl.screens.VictoryScreen`, but the base game never creates a VictoryScreen for regular combat victories. The game flow is:\n1. Combat ends (all monsters dead)\n2. AbstractRoom.endBattle() is called\n3. CombatRewardScreen.open() is called\n4. ArenaSkipCombatRewardScreenPatch intercepts and skips it in arena mode\n5. No VictoryScreen is ever instantiated\n\nThe VictoryScreen in STS is only created for special victories (Heart kill, Act 3 boss without Heart continuation).\n\n## Solution\nNeed to create a custom ArenaResultsScreen that displays after arena fights, showing:\n- Victory/Defeat status\n- Statistics (damage dealt/taken, turns, etc.)\n- Buttons: Continue, Rematch, Modify Deck (for imperfect victories/defeats)\n\nThis would replace the current approach of patching non-existent screens.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-09T21:36:49.391263383Z","created_by":"vscode","updated_at":"2026-01-09T21:54:51.923679009Z","closed_at":"2026-01-09T21:54:51.923679009Z","close_reason":"Implemented ArenaResultsScreen to properly display victory/defeat status and stats"}
{"id":"sts-arena-71s","title":"Add shift-click range selection to loadout bulk select","description":"Improve loadout bulk selection so that shift-click selects or unselects ranges rather than single items.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-09T12:40:46.026387052Z","created_by":"vscode","updated_at":"2026-01-09T14:09:23.96187393Z","closed_at":"2026-01-09T14:09:23.96187393Z","close_reason":"Implemented shift-click range selection in ArenaLoadoutSelectScreen. Now tracks an anchor index for the last clicked item, and shift-clicking selects all saved loadouts between the anchor and clicked item."}
{"id":"sts-arena-7a9","title":"Endless practice mode","description":"Mode where you fight encounters until you die. Track total wins in a session. Good for endurance testing of a build.","status":"closed","priority":4,"issue_type":"feature","created_at":"2026-01-03T16:49:37.684385763Z","created_by":"vscode","updated_at":"2026-01-03T17:25:04.719241595Z","closed_at":"2026-01-03T17:25:04.719241595Z","close_reason":"Marked as non-goal by user"}
{"id":"sts-arena-7jt","title":"Remove Mind Bloom Boss from encounter table","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-03T12:53:02.548605Z","created_by":"drmaciver","updated_at":"2026-01-03T14:55:55.566457716Z","closed_at":"2026-01-03T14:55:55.566457716Z","close_reason":"Removed Mind Bloom Boss Battle from Event Encounters list in ArenaEncounterSelectScreen.java"}
{"id":"sts-arena-8w0","title":"Fix defeat screen showing black/rapid transition","description":"The defeated screenshot in docs shows a black screen rather than the usual collapsed character. Also, when playing normally, the defeat screen rapidly transitions back to character selection without showing buttons.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-09T12:40:39.585018841Z","created_by":"vscode","updated_at":"2026-01-09T13:35:06.086131589Z","closed_at":"2026-01-09T13:35:06.086131589Z","close_reason":"Fixed by same change as sts-arena-26x - properly clearing arena state before transitions"}
{"id":"sts-arena-8wv","title":"Bottled relics need to actually bottle a card in random loadouts","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-03T03:26:01.722562Z","created_by":"drmaciver","updated_at":"2026-01-03T03:38:21.9817Z","closed_at":"2026-01-03T03:38:21.9817Z","close_reason":"Fixed: LoadoutBuilder now only adds bottle relics when suitable cards exist. ArenaSaveManager first checks for cards already marked as bottled, then falls back to finding a suitable card. Save file now includes bottled_flame, bottled_lightning, bottled_tornado fields."}
{"id":"sts-arena-8y8","title":"Egg relics should auto-upgrade appropriate card types","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-03T15:18:03.268089595Z","created_by":"vscode","updated_at":"2026-01-03T16:28:12.96093996Z","closed_at":"2026-01-03T16:28:12.96093996Z","close_reason":"Fixed egg relics (Molten/Toxic/Frozen Egg) to auto-upgrade cards of matching type (Attack/Skill/Power) in both LoadoutBuilder.java and LoadoutCreatorScreen.java","comments":[{"id":3,"issue_id":"sts-arena-8y8","author":"vscode","text":"In RandomLoadoutGenerator, when an egg relic (Molten Egg, Toxic Egg, Frozen Egg) is added to the loadout, all subsequent cards of the matching type (Attack, Skill, Power respectively) should be upgraded automatically. Currently this isn't happening.","created_at":"2026-01-03T15:18:17Z"}]}
{"id":"sts-arena-956","title":"Fix TestArenaTransitions FlakyStrategyDefinition","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-05T02:21:56.523636344Z","created_by":"vscode","updated_at":"2026-01-05T13:51:48.265047334Z","closed_at":"2026-01-05T13:51:48.265047334Z","close_reason":"Fixed by previous isolation improvements. Verified stable with 2 consecutive passing test runs"}
{"id":"sts-arena-99q","title":"Encounter search/jump","description":"Add search box to encounter selection screen. Typing filters encounters by name (e.g., typing 'heart' shows only The Heart). Reduces scrolling through all acts.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-03T16:48:57.722872925Z","created_by":"vscode","updated_at":"2026-01-03T17:14:29.267636634Z","closed_at":"2026-01-03T17:14:29.267636634Z","close_reason":"Implemented encounter search with filtering by name"}
{"id":"sts-arena-9go","title":"Card and relic performance statistics","description":"Track which cards were played and how often in winning vs losing fights. Show stats like 'Corruption played in 80% of wins' to help identify key cards.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-03T16:49:20.426761963Z","created_by":"vscode","updated_at":"2026-01-09T21:20:21.671806634Z","closed_at":"2026-01-09T21:20:21.671806634Z","close_reason":"Will not implement - enhancement feature beyond core scope"}
{"id":"sts-arena-9wb","title":"Convert user stories to acceptance tests","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T23:43:56.521990713Z","created_by":"vscode","updated_at":"2026-01-04T05:15:25.422720377Z","closed_at":"2026-01-04T05:15:25.422720377Z","close_reason":"Completed - acceptance tests created based on USER_STORIES.md and Hypothesis tests added"}
{"id":"sts-arena-9za","title":"Edit existing loadout in place","description":"Add 'Edit' button alongside Copy/Rename/Delete. Opens the loadout creator with the existing loadout's configuration, and saving overwrites the original instead of creating a new one.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-03T16:48:57.584337675Z","created_by":"vscode","updated_at":"2026-01-03T16:56:17.637817628Z","closed_at":"2026-01-03T16:56:17.637817628Z","close_reason":"Closing to redefine with proper versioning requirements."}
{"id":"sts-arena-b10","title":"Add stable-state detection to wait_for_ready in CommunicationMod","description":"Currently wait_for_ready can timeout if the game is in a state that will never become ready_for_command=true.\n\nCommunicationMod should detect when the game state is stable and will never become ready, and return an error immediately rather than waiting for timeout.\n\nThis would:\n1. Fail faster when something is wrong\n2. Provide better error messages about why the game isn't ready\n3. Avoid unnecessarily long test timeouts","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-06T02:51:00.176769417Z","created_by":"vscode","updated_at":"2026-01-09T20:49:49.715972342Z","closed_at":"2026-01-09T20:49:49.715972342Z","close_reason":"Added stable-state detection to CommunicationMod. Tracks consecutive stable frames and elapsed time since command execution. If the game is stable for 30+ frames and 60+ seconds have passed without becoming ready, reports a timeout error with helpful message instead of making client wait forever."}
{"id":"sts-arena-b9k","title":"Add loadout+encounter stats screen with Pareto-best victories","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-03T12:53:06.848009Z","created_by":"drmaciver","updated_at":"2026-01-03T16:33:28.174521175Z","closed_at":"2026-01-03T16:33:28.174521175Z","close_reason":"Added ArenaStatsScreen with loadout+encounter statistics and Pareto-best victory tracking. Screen shows win/loss stats and expandable Pareto-optimal victories (optimal in turns, damage taken, or potions used). Added repository methods for stats queries and Stats button to loadout select screen."}
{"id":"sts-arena-bs5","title":"Bottle relics: add card selection UI","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-03T18:47:18.037395002Z","created_by":"vscode","updated_at":"2026-01-09T14:20:12.428503841Z","closed_at":"2026-01-09T14:20:12.428503841Z","close_reason":"Implemented bottle relic card selection UI. Cards in the deck now show a 'B' button when a bottle relic is present and the card is eligible. Clicking toggles the bottle status. Bottled cards show [F], [L], or [T] prefix for Flame/Lightning/Tornado. Data is serialized with bottle flags in CardData."}
{"id":"sts-arena-bzg","title":"Arena loss doesn't automatically return to main menu","description":"## Bug Description\n\nAfter losing an arena fight (via 'lose' command or naturally), the game stays on the death screen instead of automatically returning to the main menu.\n\n## Expected Behavior\n\nWhen an arena fight is lost:\n1. `ArenaDefeatPatch` triggers\n2. `triggerReturnToMainMenu()` is called\n3. Game immediately returns to main menu (or encounter select)\n\n## Actual Behavior\n\nThe game stays on the death screen with `in_game=True`. The test shows:\n```\nAssertionError: Model says in_game=False, but game says True\n```\n\n## Root Cause\n\n`CardCrawlGame.startOver()` sets a flag but doesn't immediately transition. The game needs to process updates for the transition to happen.\n\n## Reproduction\n\nTest: `test_basic.py::TestArenaMode::test_arena_loss_returns_to_menu`\n\n## Fix Notes\n\nNeed to either:\n1. Add update processing loop in the patch\n2. Or use a different method to force immediate transition","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-04T14:16:54.666522376Z","created_by":"vscode","updated_at":"2026-01-04T14:19:41.0393023Z","closed_at":"2026-01-04T14:19:41.0393023Z","close_reason":"Fixed by adding prefix patches to skip death screen update/render when startOver is true"}
{"id":"sts-arena-c08","title":"Add per-step screenshots for Hypothesis test runs","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-05T13:47:45.037751166Z","created_by":"vscode","updated_at":"2026-01-05T23:54:11.233005757Z","closed_at":"2026-01-05T23:54:11.233005757Z","close_reason":"Implemented per-step screenshot capture for all 3 Hypothesis stateful tests"}
{"id":"sts-arena-cmd","title":"Loadout editor scroll area too short and overlaps header","description":"The titles for cards, potions, relics, etc. all show, but only about 10 items are rendered from the list. When scrolling, new items are rendered, and the titles are kept in the right position, but the items are not rendered","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T16:27:15.418978Z","created_by":"drmaciver","updated_at":"2026-01-03T05:39:43.148105Z","closed_at":"2026-01-03T05:39:43.148105Z","close_reason":"Fixed: expanded scroll area and prevented header overlap"}
{"id":"sts-arena-d1g","title":"Current fight indicator lingers after leaving fight","description":"The 'Current Fight' display persists after leaving a combat floor. For example, after leaving a Lagavulin fight and entering a shop, the arena menu still shows Lagavulin as 'Current Fight'. Should reset when entering non-combat floors.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-03T15:21:37.903145222Z","created_by":"vscode","updated_at":"2026-01-03T15:25:15.647581336Z","closed_at":"2026-01-03T15:25:15.647581336Z","close_reason":"Fixed by checking if currently in MonsterRoom before returning combatEncounterId. Now returns null when in shops, rest sites, events, etc."}
{"id":"sts-arena-dvy","title":"Add external repos as git submodules","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-04T03:09:32.862781798Z","created_by":"vscode","updated_at":"2026-01-04T03:25:57.017473545Z","closed_at":"2026-01-04T03:25:57.017473545Z","close_reason":"Completed: added submodules and fixed arena command timing"}
{"id":"sts-arena-e2s","title":"Custom enemy configuration","description":"Allow manual configuration of encounters: toggle burning elite modifier, adjust enemy HP, set specific enemy variants. For advanced testing scenarios.","status":"closed","priority":4,"issue_type":"feature","created_at":"2026-01-03T16:49:37.549789096Z","created_by":"vscode","updated_at":"2026-01-09T21:20:23.447276135Z","closed_at":"2026-01-09T21:20:23.447276135Z","close_reason":"Will not implement - enhancement feature beyond core scope"}
{"id":"sts-arena-emu","title":"Fix mainMenuScreen.isFadingOut visual stability blocking","description":"The areVisualEffectsStable() check in GameStateListener blocks on mainMenuScreen.isFadingOut, but this flag stays true for extended periods during transitions (2+ minutes in test logs), causing tests to timeout.\n\nNeed to either:\n1. Remove the isFadingOut check entirely\n2. Add a timeout or fallback for the check\n3. Find a more reliable indicator of main menu transitions\n\nThe uncommitted change in CommunicationMod adds this check and it's blocking Hypothesis tests.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-06T02:09:38.839010672Z","created_by":"vscode","updated_at":"2026-01-06T02:11:18.600165718Z","closed_at":"2026-01-06T02:11:18.600165718Z","close_reason":"Removed unreliable mainMenuScreen.isFadingOut check from visual stability. The loadingSave and mode==SPLASH checks are sufficient."}
{"id":"sts-arena-eu9","title":"Import/Export loadouts to shareable files","description":"Allow players to export loadouts to JSON files and import them. Enables sharing builds with friends and backing up configurations.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-03T16:48:57.191323258Z","created_by":"vscode","updated_at":"2026-01-03T16:51:02.941067886Z","closed_at":"2026-01-03T16:51:02.941067886Z","close_reason":"Removed from scope per user request."}
{"id":"sts-arena-gry","title":"Although not clickable, menu items from main menu still highlight on hover when shown behind arena screens","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T16:30:48.318672Z","created_by":"drmaciver","updated_at":"2026-01-03T03:38:31.968348Z","closed_at":"2026-01-03T03:38:31.968348Z","close_reason":"Closed"}
{"id":"sts-arena-hgj","title":"Fix arena save files persisting after exit to menu","description":"User-reported bug: Arena save files are not being cleaned up properly, causing Continue option to appear at main menu.\n\nReproduction steps:\n1. Select a pre-existing profile (ironclad) in arena mode\n2. Select a fight\n3. Win, going back to encounter select\n4. Press Back to return to main menu\n\nResult: Game shows Continue which loads the arena fight as a save file.\n\nExpected: No Continue option should appear - arena fights should not create persistent saves.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-06T02:09:39.982819797Z","created_by":"vscode","updated_at":"2026-01-06T02:16:31.595203127Z","closed_at":"2026-01-06T02:16:31.595203127Z","close_reason":"Added clearArenaRun() calls when pressing Back from arena screens to restore original save files."}
{"id":"sts-arena-j3p","title":"Fix card/relic ID mismatches in LoadoutConfig","description":"Several card and relic IDs in LoadoutConfig.java don't match the game's actual IDs:\n\nFixed:\n- 'Frozen Egg' -\u003e 'Frozen Egg 2'\n- 'Molten Egg' -\u003e 'Molten Egg 2'  \n- 'Toxic Egg' -\u003e 'Toxic Egg 2'\n- 'Hand of Greed' -\u003e 'HandOfGreed'\n\nStill investigating:\n- 'Claw' - reported as not found for Defect, but should be correct ID\n\nThis causes loadouts to fail to include certain cards/relics.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-04T09:43:29.208292084Z","created_by":"vscode","updated_at":"2026-01-04T09:55:36.264904504Z","closed_at":"2026-01-04T09:55:36.264904504Z","close_reason":"Fixed all card/relic ID mismatches: Frozen Egg 2, Molten Egg 2, Toxic Egg 2, HandOfGreed, Gash (Claw)"}
{"id":"sts-arena-j94","title":"Support burning elite modifiers for encounters","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-03T13:49:50.334531Z","created_by":"drmaciver","updated_at":"2026-01-03T14:58:53.069816132Z","closed_at":"2026-01-03T14:58:53.069816132Z","close_reason":"Implemented burning elite support for A18+: Added ELITE_ENCOUNTERS set and isEliteEncounter() helper, modified ArenaRunner to use MonsterRoomElite for elites at A18+. Note: Current implementation uses hardcoded elite names - mod compatibility issue should address dynamic elite detection."}
{"id":"sts-arena-jzq","title":"When deleting a load out, the next load out should be automatically selected","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T16:22:32.54151Z","created_by":"drmaciver","updated_at":"2026-01-03T13:54:07.39729Z","closed_at":"2026-01-03T13:54:07.39729Z","close_reason":"Closed"}
{"id":"sts-arena-k8q","title":"Improve mass selection UI with shift/ctrl modifiers","description":"The mass selection UI needs better keyboard modifier support:\n\n- **Shift+click**: Select a range from last selected item to clicked item\n- **Ctrl+click**: Toggle selection of clicked item without resetting others  \n- **Ctrl+Shift+click**: Add a range to the current selection\n\nThis matches standard OS selection behavior (Windows Explorer, Finder, etc.)","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-03T19:04:57.303363173Z","created_by":"vscode","updated_at":"2026-01-09T14:09:46.591204885Z","closed_at":"2026-01-09T14:09:46.591204885Z","close_reason":"Covered by sts-arena-71s implementation. Shift-click now selects ranges, Ctrl-click toggles individual items. Ctrl+Shift-click effectively adds ranges (since shift-click already adds to selection)."}
{"id":"sts-arena-kds","title":"Add localization support to the mod","description":"Add localization for mod UI strings. Should include at minimum: English, Simplified Chinese (large StS player community), and other common languages.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-09T12:42:37.932039715Z","created_by":"vscode","updated_at":"2026-01-09T20:55:20.633198717Z","closed_at":"2026-01-09T20:55:20.633198717Z","close_reason":"Added localization infrastructure: LocalizedStrings utility class, English and Simplified Chinese UIStrings.json files, and EditStringsSubscriber integration. Screens can now use LocalizedStrings.getText() to access localized strings."}
{"id":"sts-arena-kfw","title":"Practice in arena should include pending shop purchases","description":"When in a shop, the 'Practice in Arena' loadout builder should include any cards/relics the player has purchased but not yet left the shop with. This would let players test purchases before committing to them.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-03T15:21:50.271975922Z","created_by":"vscode","updated_at":"2026-01-03T16:36:12.642922293Z","closed_at":"2026-01-03T16:36:12.642922293Z","close_reason":"Already works as expected. In Slay the Spire, shop purchases are immediately added to deck/relics/potions. The saveCurrentLoadout() method in ArenaPauseButtonPatch copies directly from player.masterDeck.group, player.relics, and player.potions, which includes any purchased items."}
{"id":"sts-arena-l9c","title":"Detailed damage breakdown in history","description":"Expand fight history to show damage dealt per turn, damage by card type (attacks vs powers), and damage taken by source. Helps analyze combat efficiency.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-03T16:49:21.013403422Z","created_by":"vscode","updated_at":"2026-01-09T21:20:22.543435009Z","closed_at":"2026-01-09T21:20:22.543435009Z","close_reason":"Will not implement - enhancement feature beyond core scope"}
{"id":"sts-arena-m6q","title":"Bulk loadout operations (multi-select delete)","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-03T17:19:49.536653629Z","created_by":"vscode","updated_at":"2026-01-03T17:25:04.586189303Z","closed_at":"2026-01-03T17:25:04.586189303Z","close_reason":"Implemented multi-select mode with bulk delete and bulk unfavorite operations"}
{"id":"sts-arena-m9z","title":"Deck tweaks between retry attempts","description":"After a fight ends, add 'Modify Deck' option alongside 'Try Again'. Opens a simplified editor to swap cards/relics without leaving the retry loop.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-03T16:49:19.860742296Z","created_by":"vscode","updated_at":"2026-01-03T17:31:09.639734389Z","closed_at":"2026-01-03T17:31:09.639734389Z","close_reason":"Implemented Modify Deck button on death/victory screens that opens the loadout editor in retry mode, then restarts the fight with the modified loadout"}
{"id":"sts-arena-n3q","title":"Add 'Try Again?' screen for imperfect arena victories","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-03T12:53:08.037887Z","created_by":"drmaciver","updated_at":"2026-01-03T15:02:44.483120628Z","closed_at":"2026-01-03T15:02:44.483120628Z","close_reason":"Implemented Try Again screen for imperfect victories: Added ArenaVictoryScreenPatch that shows 'Try Again' and 'Continue' buttons when player wins but took damage. Modified ArenaRunner.recordVictory() to not auto-return to menu for imperfect victories."}
{"id":"sts-arena-p43","title":"Fix shop purchases lost when using Practice in Arena","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-03T16:39:26.937273383Z","created_by":"vscode","updated_at":"2026-01-03T16:42:24.471679465Z","closed_at":"2026-01-03T16:42:24.471679465Z","close_reason":"Fixed: When starting arena from a normal run (Practice in Arena), force a game save BEFORE setting isArenaRun flag to preserve pending changes like shop purchases. The save file is then properly backed up and restored when returning to the normal run."}
{"id":"sts-arena-pr4","title":"Loadout search and filter","description":"Add search box to filter loadouts by name. Add class filter buttons (Ironclad, Silent, Defect, Watcher) to show only loadouts for specific characters.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-03T16:48:57.451559633Z","created_by":"vscode","updated_at":"2026-01-03T17:11:36.427783596Z","closed_at":"2026-01-03T17:11:36.427783596Z","close_reason":"Implemented loadout search by name and character class filter tabs"}
{"id":"sts-arena-qct","title":"Seed/RNG control for reproducible fights","description":"Allow setting a seed for card draw RNG. Enables reproducible fights for testing specific scenarios or sharing exact fight conditions.","status":"closed","priority":4,"issue_type":"feature","created_at":"2026-01-03T16:49:37.818526096Z","created_by":"vscode","updated_at":"2026-01-03T17:25:04.651873053Z","closed_at":"2026-01-03T17:25:04.651873053Z","close_reason":"Marked as non-goal by user"}
{"id":"sts-arena-rvn","title":"Add acceptance tests for arena save file cleanup","description":"Write acceptance tests verifying that arena save files are properly cleaned up when:\n- Exiting arena via Back button from encounter select\n- Exiting arena via Back button from loadout select\n- Winning/losing a fight and returning to encounter select\n- Abandoning a run\n\nTests should verify no Continue option appears at main menu after arena mode.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T02:09:41.144180381Z","created_by":"vscode","updated_at":"2026-01-06T02:21:12.780044882Z","closed_at":"2026-01-06T02:21:12.780044882Z","close_reason":"Added acceptance tests for save file cleanup: test_arena_back_cleans_up_after_victory, test_arena_back_cleans_up_after_loss, test_multiple_arena_fights_with_back_cleanup","dependencies":[{"issue_id":"sts-arena-rvn","depends_on_id":"sts-arena-2bk","type":"blocks","created_at":"2026-01-06T02:09:52.70383022Z","created_by":"vscode"}]}
{"id":"sts-arena-slv","title":"Fix arena command timing - register before PostInitialize","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-04T03:09:26.89562417Z","created_by":"vscode","updated_at":"2026-01-04T03:25:57.041497211Z","closed_at":"2026-01-04T03:25:57.041497211Z","close_reason":"Completed: added submodules and fixed arena command timing"}
{"id":"sts-arena-uew","title":"Write concrete acceptance tests for state machine debugging","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T13:47:46.731557Z","created_by":"vscode","updated_at":"2026-01-09T20:43:12.442213838Z","closed_at":"2026-01-09T20:43:12.442213838Z","close_reason":"Created test_state_machine.py with 4 test classes covering state transitions, invariants, error handling, and state consistency. Tests are concrete and reproducible for debugging."}
{"id":"sts-arena-v70","title":"Create stateful Hypothesis-based acceptance tests","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T23:43:57.567184588Z","created_by":"vscode","updated_at":"2026-01-04T05:15:25.446917918Z","closed_at":"2026-01-04T05:15:25.446917918Z","close_reason":"Completed - acceptance tests created based on USER_STORIES.md and Hypothesis tests added"}
